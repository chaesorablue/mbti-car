<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI & ë¼ì´í”„ìŠ¤íƒ€ì¼ ë“œë¦¼ì¹´ í…ŒìŠ¤íŠ¸</title>
    <!-- External Libraries (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #0f172a; color: #f1f5f9; overflow-x: hidden; }
        .mbti-btn.active { background-color: #3b82f6; color: white; border-color: #3b82f6; transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5); }
        .age-btn.active, .lifestyle-btn.active { background-color: #3b82f6; color: white; border-color: #3b82f6; }
        .result-gradient { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
        .car-img-container::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to top, rgba(15, 23, 42, 0.8), transparent); }
        .step { transition: opacity 0.4s ease-in-out; }
        .hidden { display: none; opacity: 0; }
        
        /* Animation for call-to-action */
        .ad-glow { animation: ad-glow-pulse 2s infinite; }
        @keyframes ad-glow-pulse {
            0% { border-color: rgba(59, 130, 246, 0.2); }
            50% { border-color: rgba(59, 130, 246, 0.6); }
            100% { border-color: rgba(59, 130, 246, 0.2); }
        }
        button { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 md:p-8">

    <div id="app" class="max-w-3xl w-full bg-slate-900 rounded-[2rem] md:rounded-[2.5rem] shadow-2xl overflow-hidden border border-slate-800 flex flex-col">
        <!-- Header Section -->
        <div class="p-8 md:p-10 text-center relative overflow-hidden">
            <div class="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
            <h1 class="text-2xl md:text-4xl font-black mb-3 tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-emerald-400">
                ğŸï¸ ë‚´ ì„±ê²©ì— ë”± ë§ëŠ” ì¸ìƒì°¨ ì°¾ê¸°
            </h1>
            <p class="text-slate-300 font-medium text-sm md:text-base">
                ë¡¤ìŠ¤ë¡œì´ìŠ¤ë¶€í„° ë°˜ì „ì˜ 'í•¨ì •' ì¹´ë“œê¹Œì§€!<br class="sm:hidden"> 
                ë‹¹ì‹ ì´ ì§„ì§œ íƒ€ì•¼ í•  ì°¨ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?
            </p>
        </div>

        <!-- Progress Bar -->
        <div class="w-full bg-slate-800 h-1.5">
            <div id="progress" class="bg-gradient-to-r from-blue-500 to-emerald-500 h-full transition-all duration-1000" style="width: 25%"></div>
        </div>

        <!-- Step Containers -->
        <div class="p-6 md:p-12 flex-grow">
            <!-- Step 1: MBTI Selection -->
            <div id="step-1" class="step">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-xl md:text-2xl font-bold">1ë‹¨ê³„: ë‹¹ì‹ ì˜ MBTIëŠ”?</h2>
                    <span class="text-slate-500 font-mono text-xs md:text-sm uppercase tracking-widest">Step 01</span>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4" id="mbti-grid"></div>
            </div>

            <!-- Step 2: Age Range Selection -->
            <div id="step-2" class="step hidden">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-xl md:text-2xl font-bold">2ë‹¨ê³„: í˜„ì¬ ì—°ë ¹ëŒ€ëŠ”?</h2>
                    <span class="text-slate-500 font-mono text-xs md:text-sm uppercase tracking-widest">Step 02</span>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4" id="age-grid"></div>
            </div>

            <!-- Step 3: Lifestyle -->
            <div id="step-3" class="step hidden">
                <div class="flex items-center justify-between mb-8">
                    <h2 class="text-xl md:text-2xl font-bold">3ë‹¨ê³„: í˜„ì‹¤ ë¼ì´í”„ìŠ¤íƒ€ì¼</h2>
                    <span class="text-slate-500 font-mono text-xs md:text-sm uppercase tracking-widest">Step 03</span>
                </div>
                <div class="space-y-8">
                    <!-- Gender -->
                    <div>
                        <p class="mb-4 text-slate-400 font-bold uppercase text-xs tracking-widest text-center sm:text-left">ì„±ë³„</p>
                        <div class="flex flex-col sm:flex-row gap-3">
                            <button onclick="setLifestyle('gender', 'male')" class="lifestyle-btn gender-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="gender-male">ğŸ‘¨ ë‚¨ì„± (Male)</button>
                            <button onclick="setLifestyle('gender', 'female')" class="lifestyle-btn gender-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="gender-female">ğŸ‘© ì—¬ì„± (Female)</button>
                        </div>
                    </div>
                    <!-- Home Ownership -->
                    <div>
                        <p class="mb-4 text-slate-400 font-bold uppercase text-xs tracking-widest text-center sm:text-left">ë‚´ ì§‘ ë§ˆë ¨ ì—¬ë¶€</p>
                        <div class="flex flex-col sm:flex-row gap-3">
                            <button onclick="setLifestyle('home', true)" class="lifestyle-btn home-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="home-yes">ğŸ  ë‚´ ì§‘ ë³´ìœ </button>
                            <button onclick="setLifestyle('home', false)" class="lifestyle-btn home-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="home-no">ğŸ¢ ì£¼íƒ ì¤€ë¹„ ì¤‘</button>
                        </div>
                    </div>
                    <!-- Partner -->
                    <div>
                        <p class="mb-4 text-slate-400 font-bold uppercase text-xs tracking-widest text-center sm:text-left">ë™ë°˜ì ìœ ë¬´</p>
                        <div class="flex flex-col sm:flex-row gap-3">
                            <button onclick="setLifestyle('partner', true)" class="lifestyle-btn partner-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="partner-yes">â¤ï¸ ì—°ì¸/ê°€ì¡± ìˆìŒ</button>
                            <button onclick="setLifestyle('partner', false)" class="lifestyle-btn partner-btn flex-1 py-4 border-2 border-slate-800 rounded-2xl hover:border-blue-500 transition font-bold" id="partner-no">ğŸ‘¤ ì‹±ê¸€ ë¼ì´í”„</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Final Result -->
            <div id="step-4" class="step hidden text-center">
                <div id="result-container" class="opacity-0 transition-opacity duration-1000">
                    <div class="mb-8">
                        <span id="result-mbti-tag" class="inline-block px-4 py-1 bg-blue-900/50 text-blue-400 rounded-full text-xs font-bold mb-3 border border-blue-800/50"></span>
                        <h2 class="text-3xl md:text-4xl font-black text-white">ë‹¹ì‹ ì—ê²Œ ë§¤ì¹­ëœ ì¸ìƒì°¨!</h2>
                    </div>
                    
                    <div class="result-gradient border-2 border-slate-800 rounded-[2rem] p-4 md:p-8 shadow-2xl mb-8">
                        <div id="car-brand" class="text-blue-500 font-black text-xl md:text-2xl mb-1 italic tracking-tighter uppercase"></div>
                        <div id="car-name" class="text-3xl md:text-5xl font-black text-white mb-8 tracking-tight"></div>
                        
                        <div class="car-img-container relative w-full aspect-video bg-slate-800 rounded-2xl mb-8 overflow-hidden border border-slate-700 shadow-inner">
                             <img id="car-image" src="" alt="ìë™ì°¨ ì´ë¯¸ì§€" class="w-full h-full object-cover opacity-0 transition-opacity duration-1000" onerror="this.src='https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&w=800&q=80'">
                             <div id="image-loader" class="absolute inset-0 flex items-center justify-center bg-slate-800">
                                 <div class="animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent"></div>
                             </div>
                        </div>

                        <div class="text-left bg-slate-900/50 p-6 rounded-2xl border border-slate-800">
                            <p id="car-desc" class="text-slate-300 leading-relaxed text-sm md:text-lg font-medium"></p>
                        </div>
                    </div>

                    <button onclick="reset()" class="w-full py-5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-[1.5rem] font-black text-xl hover:shadow-[0_0_30px_rgba(59,130,246,0.4)] transition-all active:scale-95 mb-6 uppercase tracking-widest">Test Again</button>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div id="nav-btns" class="mt-8 flex justify-between items-center">
                <button id="prev-btn" onclick="prevStep()" class="text-slate-500 font-bold hover:text-white invisible transition px-4 underline underline-offset-8 decoration-2">PREV</button>
                <button id="next-btn" onclick="nextStep()" class="px-10 md:px-14 py-4 md:py-5 bg-white text-slate-900 rounded-[1.2rem] font-black hover:bg-blue-400 hover:text-white disabled:bg-slate-800 disabled:text-slate-600 shadow-xl transition-all active:scale-95">ë‹¤ìŒ ë‹¨ê³„</button>
            </div>
        </div>

        <!-- Coupang Partners Section -->
        <div class="px-6 md:px-8 pb-10">
            <div class="bg-slate-800/40 rounded-3xl p-6 border-2 border-dashed border-slate-700 ad-glow text-center">
                <div class="mb-4">
                    <p class="text-blue-400 font-black text-lg mb-1">ğŸ ë‚´ ì°¨ë¥¼ ìœ„í•œ ì™„ë²½í•œ ì„ íƒ!</p>
                    <p class="text-slate-400 text-xs md:text-sm italic">"ìƒˆ ì°¨ ì‚¬ê¸° ì „, ì´ ì•„ì´í…œë§Œí¼ì€ ê¼­ ì±™ê¸°ì„¸ìš”"</p>
                </div>
                
                <div class="flex justify-center overflow-hidden rounded-xl bg-white p-2">
                    <a href="https://link.coupang.com/a/dMAVnO" target="_blank" referrerpolicy="unsafe-url" class="block w-full">
                        <img src="https://ads-partners.coupang.com/banners/965107?subId=&traceId=V0-301-c1744fa69c93f626-I965107&w=728&h=90" alt="ì¿ íŒ¡ ë°°ë„ˆ" class="max-w-full h-auto inline-block">
                    </a>
                </div>
                
                <p class="text-[10px] text-slate-500 mt-3 opacity-60">
                    ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </div>

    <script>
        // ê³ ë„í™”ëœ ìë™ì°¨ ë°ì´í„°ë² ì´ìŠ¤ (Toyota ë…¸ì¶œ ë¹ˆë„ ê°œì„  ë° ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸)
        const carDatabase = [
            // HYUNDAI
            { brand: "HYUNDAI", name: "Grandeur", type: "Luxury Sedan", mbti: "ESTJ,ENTJ,ISTJ", age: [35, 65], luxury: 4, pref: "male", image: "https://i.ibb.co/7t9P81Gp/grandeur.jpg", desc: "ëŒ€í•œë¯¼êµ­ ì„±ê³µì˜ ìƒì§•. í’ˆê²© ìˆëŠ” ë‹¹ì‹ ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ìš°ì•„í•œ ì¼ìƒì„ ì™„ë²½í•˜ê²Œ ì—°ê²°í•´ì¤„ ìµœê³ ì˜ ëŸ­ì…”ë¦¬ ì„¸ë‹¨ì…ë‹ˆë‹¤." },
            { brand: "HYUNDAI", name: "Ioniq 5", type: "EV", mbti: "ENTP,ENFP,INTP", age: [25, 50], luxury: 3, pref: "any", image: "https://i.ibb.co/ZQb29wp/ioniq5.jpg", desc: "ë¯¸ë˜ë¥¼ ì•ë‹¹ê¸°ëŠ” ê¸°ìˆ ë ¥. ì°½ì˜ì ì¸ ë‹¹ì‹ ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ì— ë§ì¶˜ í˜ì‹ ì ì¸ ê±°ì£¼ ê³µê°„ì„ ì œê³µí•©ë‹ˆë‹¤." },
            { brand: "HYUNDAI", name: "Porter II", type: "Truck", mbti: "ISTJ,ESTJ,ISTP", age: [25, 65], luxury: 1, pref: "male", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTYz/MDAxNzcxMDc2NDcxNTA5.Rue9H_ai6UW4kMxl7yn3QWk1jr_MU-WSaOQJ0Nd8ct8g.s_y7bNxyrxlaqKEbDRqgzyfe13pVLId-eNfcX6xU2E8g.JPEG/porter2.jpg?type=w773", desc: "ì‚¶ì˜ í˜„ì¥ì—ì„œ ê°€ì¥ ë¹›ë‚˜ëŠ” ë‹¹ì‹ . ë•€ì˜ ê°€ì¹˜ë¥¼ ì•„ëŠ” ë‹¹ì‹ ì„ ìœ„í•œ ëŒ€í•œë¯¼êµ­ ìµœê³ ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤." },
            { brand: "HYUNDAI", name: "Tucson", type: "SUV", mbti: "ENFJ,ESFJ,ISFP", age: [25, 55], luxury: 3, pref: "any", image: "https://i.ibb.co/B8L6vBV/tucson.jpg", desc: "ëª¨ë“  ê¸¸ì„ ì•„ìš°ë¥´ëŠ” ê· í˜•. í™œë™ì ì¸ ë‹¹ì‹ ì˜ ë¼ì´í”„ìŠ¤íƒ€ì¼ì— ê°€ì¥ ì í•©í•œ íŠ¸ë Œë””í•œ SUVì…ë‹ˆë‹¤." },
            { brand: "HYUNDAI", name: "Avante", type: "Sedan", mbti: "ISFP,ENFP,ESFP", age: [20, 45], luxury: 2, pref: "female", image: "https://i.ibb.co/Y7Kvjbnf/avante.jpg", desc: "ì„¸ë ¨ëœ ë„ì‹œì¸ì˜ ë°ì¼ë¦¬ ì¹´. ìŠ¤ë§ˆíŠ¸í•œ ê°€ì¹˜ì™€ ìŠ¤íƒ€ì¼ì„ ë™ì‹œì— ì¡ê³  ì‹¶ì€ ë‹¹ì‹ ì—ê²Œ ì•ˆì„±ë§ì¶¤ì…ë‹ˆë‹¤." },
            
            // KIA
            { brand: "KIA", name: "Bongo III", type: "Truck", mbti: "ISTJ,ESTJ,ISTP", age: [25, 65], luxury: 1, pref: "male", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfNzkg/MDAxNzcxMDc0ODAyNDE3.z5w10javZP3MnKjfj3HvOD2iPrtjhmLYpEAUmwMrQhQg._ljE03SsGXn10WUmC2UwzKwRyULHDqsDAzKAmKTy2VMg.JPEG/bongotop.jpg?type=w773", desc: "ì‹ ì†í•¨ê³¼ ì‹ ë¢°ì˜ ìƒì§•. ê³„íšì ì¸ ë‹¹ì‹ ì˜ ì„±ê³µ ê°€ë„ë¥¼ í•¨ê»˜ ë‹¬ë¦¬ëŠ” ë“ ë“ í•œ ì¼ê¾¼ì…ë‹ˆë‹¤." },
            { brand: "KIA", name: "Carnival", type: "MPV", mbti: "ESFJ,ENFJ,ISFJ", age: [30, 65], luxury: 3, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTYx/MDAxNzcxMDc0ODAyMDUw.U37FUFNsIxjktazembaaSh_NMIBCulc17eoN3kkt5v4g.fl6_ooBfPRYw3kh4T0Tud85QQ6udmCNbCpJAGUqjpdIg.JPEG/carnival.jpg?type=w773", desc: "í•¨ê»˜ë¼ì„œ ë” ì¦ê±°ìš´ ì—¬ì •. ì†Œì¤‘í•œ ì‚¬ëŒë“¤ê³¼ì˜ ì‹œê°„ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•˜ëŠ” ë‹¹ì‹ ì„ ìœ„í•œ ìµœì ì˜ ê³µê°„ì…ë‹ˆë‹¤." },
            { brand: "KIA", name: "Ray", type: "Compact", mbti: "INFP,ENTP,ISFP,ESFP", age: [20, 50], luxury: 1, pref: "female", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfOTUg/MDAxNzcxMDc0ODAyMjYw.GL1mhNHUbs1gelUzfgmVnSiDHhnZpNSZXQpDr_FJX6Ig.padVU8J0uBX5E3NynIl2ft1Q6qLd5JHcnX-Eq7eK9YQg.JPEG/ray.jpg?type=w773", desc: "ë°•ìŠ¤ë¥¼ ë„˜ì€ ìƒìƒë ¥. ì‘ì§€ë§Œ ë„“ì€ ê³µê°„ì²˜ëŸ¼ ë‹¹ì‹ ì˜ ë¬´ê¶ë¬´ì§„í•œ ê°€ëŠ¥ì„±ì„ ë‹´ì•„ë‚¼ ìˆ˜ ìˆëŠ” ë°•ìŠ¤ì¹´ì…ë‹ˆë‹¤." },
            { brand: "KIA", name: "Sorento", type: "SUV", mbti: "ESFJ,ENFJ,INFJ,ENTJ", age: [30, 60], luxury: 4, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMjQ2/MDAxNzcxMDc0ODAyMzI3.1ViDpYZwc7Psk3K1GmokI4PxuYW8DvmAmB2h0mUvA8Yg.IKU83AACMqpIWF2lzgODifQhKF587dNOkIertIyesekg.JPEG/sorento.jpg?type=w773", desc: "ì••ë„ì ì¸ ì‹ ë¢°ì˜ ìŠ¤í…Œë””ì…€ëŸ¬. íƒ„íƒ„í•œ ì£¼í–‰ ì„±ëŠ¥ê³¼ ì„¸ë ¨ë¯¸ë¡œ ë‹¹ì‹ ì˜ í’ˆê²©ì„ ë†’ì—¬ì£¼ëŠ” êµ­ë¯¼ SUVì…ë‹ˆë‹¤." },
            
            // TOYOTA (Updated with requested links)
            { brand: "TOYOTA", name: "RAV4", type: "SUV", mbti: "ISFJ,ESFJ,INFJ,ISTJ,INFP", age: [25, 65], luxury: 2, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTk2/MDAxNzcxMDc2NDcxNTAw.e9to-Lg_MUj4k6PX2hT9avYcEw-ZiZuUBOY-VRbabiUg.JCd0tZA1s-Owew38MPuhGgvPwpa9RjvGoDin-WdHVdAg.JPEG/rav4.jpg?type=w773", desc: "ì •ìˆ™í•¨ ì†ì˜ ê°•ë ¥í•¨. ì•ˆì •ì ì´ê³  í‰í™”ë¡œìš´ ì¼ìƒì„ ì¶”êµ¬í•˜ëŠ” ë‹¹ì‹ ì˜ ì‹ ë…ì„ ì§€ì¼œì¤„ ì•ˆì „í•œ SUVì…ë‹ˆë‹¤." },
            { brand: "TOYOTA", name: "Camry", type: "Sedan", mbti: "ISTJ,ESTJ,INTJ,ISFJ,ENTJ", age: [30, 65], luxury: 3, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTky/MDAxNzcxMDc2NDcxNDcx.EcCevsJDb1mZuq85DUqiqpCGs-pDh77a8lrAGfHWulkg.IZVHtbWvPfTuca9xIBwjQgF9oFkDnXgMYDONDuR1zzog.JPEG/camry.jpg?type=w773", desc: "í•©ë¦¬ì  ì„ íƒì˜ ê¸°ì¤€. ìœ í–‰ì— í”ë“¤ë¦¬ì§€ ì•Šê³  ë³¸ì§ˆì ì¸ ê°€ì¹˜ë¥¼ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë‹¹ì‹ ì—ê²Œ ì™„ë²½í•œ í•´ë‹µì…ë‹ˆë‹¤." },
            { brand: "TOYOTA", name: "Prius", type: "Hybrid", mbti: "INFJ,INFP,ENFP,INTP,ENTP", age: [20, 60], luxury: 2, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTc1/MDAxNzcxMDc2NDcxOTYy.jhLzhBBtDVDBNj59DvBP-wwRjkQNtBIUi_i6M0WaUxAg.2_pGJsCq9fTksi2DzeR2L3Hci09AAt_nUmX3bVZpmukg.JPEG/prius.jpg?type=w773", desc: "ë¯¸ë˜ë¥¼ ìƒê°í•˜ëŠ” ë”°ëœ»í•œ ì‹œì„ . í™˜ê²½ì„ ì•„ë¼ëŠ” ë‹¹ì‹ ì˜ ì² í•™ì„ ì™„ì„±í•´ì£¼ëŠ” ì§€ì ì¸ í•˜ì´ë¸Œë¦¬ë“œ ì¹´ì…ë‹ˆë‹¤." },
            { brand: "TOYOTA", name: "Highlander", type: "SUV", mbti: "ISFJ,ESFJ,INFJ,ENFJ,ESTJ", age: [30, 65], luxury: 4, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfNjQg/MDAxNzcxMDc2NDcxOTYw.P5w2yqNNzGIU-t61QY9wYAWzqV_h4h5l6M3rHjsjzBkg.x5LYogFxDZPBodA3bcXhLeiyPfBz71aYmZMmI5SAXOQg.JPEG/highlander.jpg?type=w773", desc: "ë‹¤ì •í•œ ë¦¬ë”ì˜ ë„‰ë„‰í•œ ê³µê°„. ë‹¹ì‹ ì´ ì•„ë¼ëŠ” ì‚¬ëŒë“¤ê³¼ ê°€ì¥ ì¡°ìš©í•˜ê³  í¸ì•ˆí•˜ê²Œ ëŒ€í™”í•  ìˆ˜ ìˆëŠ” SUVì…ë‹ˆë‹¤." },
            
            // BMW & BENZ & LUXURY
            { brand: "BMW", name: "3 Series", type: "Sport Sedan", mbti: "ESTP,ENTP,ISTP", age: [20, 50], luxury: 4, pref: "male", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTc0/MDAxNzcxMDc0ODAxNDQx.JDpUriL-uqpLkppTxK9FHuXgSlBmKci-lJH7x2GUMlUg.abXi7cledEEgPTNwBqRay08c5_4W7w3iBvIOp_ajkvcg.JPEG/bmw3.jpg?type=w773", desc: "ë“œë¼ì´ë¹™ì˜ ì •ì„. ì—­ë™ì ì´ê³  ë…¼ë¦¬ì ì¸ ë‹¹ì‹ ì˜ ì§ˆì£¼ ë³¸ëŠ¥ì„ ë§Œì¡±ì‹œí‚¬ ì™„ë²½í•œ í•¸ë“¤ë§ì„ ì„ ì‚¬í•©ë‹ˆë‹¤." },
            { brand: "MERCEDES-BENZ", name: "GLB 250", type: "Compact SUV", mbti: "ISFJ,ESFJ,ENFP,ISFP", age: [25, 55], luxury: 4, pref: "female", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMTc0/MDAxNzcxMDc0ODAxNDI3.bQazVu13Qnu1K3WvezbiqJrCE-WduaqraB6qnItKXxgg.TdAzS7aveM_wtpaxcqcb9JBcmXLLzM1tgatx6ZYu0Dsg.JPEG/glb.jpg?type=w773", desc: "ì„¸ë ¨ëœ ëŸ­ì…”ë¦¬ì™€ ì‹¤ìš©ì„±ì˜ ì¡°í™”. ë‹¤ì±„ë¡œìš´ ë§¤ë ¥ì„ ì§€ë‹Œ ë‹¹ì‹ ì˜ ì¼ìƒì„ ë”ìš± ì•„ë¦„ë‹µê²Œ ì¥ì‹í•´ì¤„ SUVì…ë‹ˆë‹¤." },
            { brand: "MERCEDES-BENZ", name: "S-Class", type: "Luxury Sedan", mbti: "ENTJ,INTJ,INFJ,ESTJ", age: [40, 65], luxury: 5, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMzUg/MDAxNzcxMDc0ODAxNDQ3.bGOyQ0S39TtqqangSRXs22MpKg3YGWYwbB61zAh9LaAg.XnzhCje0O1sH6O1_Q0nbRR89oj6wthTBcCJ4bjtkPbkg.JPEG/sclass.jpg?type=w773", desc: "ìµœê³ ê°€ ì•„ë‹ˆë©´ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤. ì •ì ì— ë„ë‹¬í•œ ë‹¹ì‹ ì˜ í’ˆê²©ê³¼ ìœ„ì—„ì„ ì¦ëª…í•˜ëŠ” ë‹¨ í•˜ë‚˜ì˜ ì„ íƒì…ë‹ˆë‹¤." },
            { brand: "MINI", name: "Cooper", type: "Compact", mbti: "ENFP,ESFP,ISFP,ENTP", age: [20, 40], luxury: 3, pref: "female", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfOTQg/MDAxNzcxMDc2MjA4MDk5.NdEaMbM707zk9mxb4VP9ufuqTh5p_Ii60t8oDdAd8jkg.hA2IvIWt0RTBX74nQCvZS1ND75rpN7__hFE0ZgQwwQIg.JPEG/mini.jpg?type=w773", desc: "ê°œì„±ì´ ê³§ ë‹¹ì‹ ì˜ ì´ë¦„. ì•„ì´ì½”ë‹‰í•œ ë””ìì¸ìœ¼ë¡œ ë„ë¡œ ìœ„ ëª¨ë“  ì‹œì„ ì„ ì‚¬ë¡œì¡ëŠ” ê°€ì¥ ê°ê°ì ì¸ íŒŒíŠ¸ë„ˆì…ë‹ˆë‹¤." },
            { brand: "TESLA", name: "Model Y", type: "EV", mbti: "ENTP,INTJ,INTP,ENTJ", age: [25, 55], luxury: 4, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfMjcz/MDAxNzcxMDc2MjA4MDg2.9sDpqcAdz0joU53UjrKRcbTQn3z-nUd-57aundE4Wmwg.7L5btj_1ermaMyLfsPGZVDf8D4S3xULgdjjEYimEJMog.JPEG/modely.jpg?type=w773", desc: "ë³€í™”ë¥¼ ì´ë„ëŠ” ê°œì²™ì. ì•ì„  í…Œí¬ë†€ë¡œì§€ë¥¼ ì¦ê¸°ëŠ” ë‹¹ì‹ ì˜ ì§€ì  ìœ í¬ë¥¼ ì¶©ì¡±ì‹œì¼œì¤„ í˜ì‹ ì ì¸ ì „ê¸° SUVì…ë‹ˆë‹¤." },
            { brand: "ROLLS-ROYCE", name: "Phantom", type: "Ultra Luxury", mbti: "INTJ,ENTJ", age: [50, 65], luxury: 5, pref: "male", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfNjgg/MDAxNzcxMDc1OTAzODUz.lhcNFr6leqfQ8UOhM9X89abhXdeHsSpHHaP6Ap9AOd8g.SiWXoXPim0df3bauZfh6CB4KxSVZND61llQoJeq3jIYg.JPEG/rolls.jpg?type=w773", desc: "ë„ë¡œ ìœ„ì˜ ê¶ì „. ë‹¹ì‹ ì˜ ëª¨ë“  ë°œê±¸ìŒì´ ì—­ì‚¬ê°€ ë©ë‹ˆë‹¤. ì„¸ìƒì˜ ê²½ì™¸ì‹¬ì„ í•œ ëª¸ì— ë°›ëŠ” ì„±ê³µì˜ ìµœì¢… ë‹¨ê³„ì…ë‹ˆë‹¤." },
            { brand: "TATA", name: "Tiago", type: "Trap", mbti: "INTP,INFP", age: [20, 30], luxury: 0, pref: "any", image: "https://postfiles.pstatic.net/MjAyNjAyMTRfNjYg/MDAxNzcxMDc1OTAzODcw.gk3upQaSEHHVPfI-I1GJZ-hE7G68Ng5YBWnqIdGGpi8g.TM75XBpT72AINfI7hfUPfyiS3evTAHVU8vlh4ZlrdFsg.JPEG/tata_tiago.jpg?type=w773", desc: "ì•—! 'í•¨ì •' ì¹´ë“œì— ë‹¹ì²¨ë˜ì…¨êµ°ìš”. ì„¸ìƒì—ì„œ ê°€ì¥ ë¯¸ë‹ˆë©€í•œ ì´ë™ìˆ˜ë‹¨, í‹°ì•„ê³ ì™€ í•¨ê»˜ ì—‰ëš±í•˜ê³  ì†Œë°•í•œ ì—¬í–‰ì„ ë– ë‚˜ë³¼ê¹Œìš”? ğŸ˜‚" }
        ];

        const mbtiEmojis = {
            "ISTJ": "ğŸ’¼", "ISFJ": "ğŸ›¡ï¸", "INFJ": "ğŸ”®", "INTJ": "ğŸ“",
            "ISTP": "ğŸ› ï¸", "ISFP": "ğŸ¨", "INFP": "ğŸ§š", "INTP": "ğŸ§ª",
            "ESTP": "âš¡", "ESFP": "ğŸ­", "ENFP": "ğŸˆ", "ENTP": "ğŸ’¡",
            "ESTJ": "âš–ï¸", "ESFJ": "ğŸ¤", "ENFJ": "ğŸ—£ï¸", "ENTJ": "ğŸ”ï¸"
        };
        
        let currentState = { step: 1, mbti: "", age: null, home: null, partner: null, gender: null };

        window.onload = () => {
            const mbtiGrid = document.getElementById('mbti-grid');
            Object.keys(mbtiEmojis).forEach(type => {
                const btn = document.createElement('button');
                btn.className = "mbti-btn py-4 md:py-5 border-2 border-slate-800 rounded-2xl font-black text-sm md:text-lg transition-all bg-slate-800/50 hover:border-blue-500 flex flex-col items-center justify-center gap-1";
                btn.innerHTML = `<span class="text-xl md:text-2xl">${mbtiEmojis[type]}</span><span class="text-xs md:text-base">${type}</span>`;
                btn.onclick = () => { 
                    currentState.mbti = type; 
                    document.querySelectorAll('.mbti-btn').forEach(b => b.classList.remove('active')); 
                    btn.classList.add('active'); 
                    updateNav(); 
                };
                mbtiGrid.appendChild(btn);
            });

            const ageGrid = document.getElementById('age-grid');
            for (let age = 20; age <= 60; age += 5) {
                const btn = document.createElement('button');
                btn.className = "age-btn py-4 border-2 border-slate-800 rounded-2xl font-bold transition-all bg-slate-800/50 hover:border-blue-500 text-sm md:text-base";
                btn.innerText = `${age}ëŒ€${age === 60 ? '+' : ''}`;
                btn.onclick = () => { 
                    currentState.age = age; 
                    document.querySelectorAll('.age-btn').forEach(b => b.classList.remove('active')); 
                    btn.classList.add('active'); 
                    updateNav(); 
                };
                ageGrid.appendChild(btn);
            }
        };

        function setLifestyle(key, value) {
            currentState[key] = value;
            document.querySelectorAll(`.${key}-btn`).forEach(b => b.classList.remove('active'));
            const idSuffix = (typeof value === 'boolean') ? (value ? 'yes' : 'no') : value;
            const targetEl = document.getElementById(`${key}-${idSuffix}`);
            if (targetEl) targetEl.classList.add('active');
            updateNav();
        }

        function updateNav() {
            const nextBtn = document.getElementById('next-btn');
            const prevBtn = document.getElementById('prev-btn');
            if (currentState.step === 1) { nextBtn.disabled = !currentState.mbti; prevBtn.classList.add('invisible'); }
            else if (currentState.step === 2) { nextBtn.disabled = !currentState.age; prevBtn.classList.remove('invisible'); }
            else if (currentState.step === 3) { 
                nextBtn.disabled = (currentState.home === null || currentState.partner === null || currentState.gender === null); 
                nextBtn.innerText = "ë‚´ ì¸ìƒì°¨ í™•ì¸í•˜ê¸°"; 
            }
        }

        function nextStep() { if (currentState.step === 3) showResult(); else goToStep(currentState.step + 1); }
        function prevStep() { goToStep(currentState.step - 1); }

        function goToStep(s) {
            document.querySelectorAll('.step').forEach(el => el.classList.add('hidden'));
            document.getElementById(`step-${s}`).classList.remove('hidden');
            currentState.step = s;
            document.getElementById('progress').style.width = (s * 25) + "%";
            if (s === 4) document.getElementById('nav-btns').classList.add('hidden');
            else { document.getElementById('nav-btns').classList.remove('hidden'); document.getElementById('next-btn').innerText = "ë‹¤ìŒ ë‹¨ê³„"; }
            updateNav();
        }

        function showResult() {
            let scores = carDatabase.map(car => {
                let score = 0;
                // 1. MBTI Matching (50pts)
                if (car.mbti.includes(currentState.mbti)) score += 50;
                // 2. Age Matching (30pts)
                if (currentState.age >= car.age[0] && currentState.age <= car.age[1]) score += 30;
                // 3. Gender (20pts) - "any"ë¥¼ 18ì ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ ë²”ìš© ì°¨ëŸ‰ ê²½ìŸë ¥ í™•ë³´
                if (car.pref === currentState.gender) score += 20;
                else if (car.pref === "any") score += 18;
                // 4. EV Preference (Home)
                if (currentState.home && car.type === "EV") score += 10;
                // 5. Luxury Synergy
                if (currentState.home && currentState.age >= 45 && car.luxury >= 5) score += 10;
                // 6. Tie-breaker (Random 1-10pts) - ê²°ê³¼ì˜ ë‹¤ì–‘ì„± ë° í† ìš”íƒ€ ë“± ê³¨ê³ ë£¨ ë…¸ì¶œ
                score += Math.floor(Math.random() * 10);
                
                return { ...car, score };
            });

            scores.sort((a, b) => b.score - a.score);
            const best = scores[0];

            document.getElementById('result-mbti-tag').innerText = 
                `${mbtiEmojis[currentState.mbti]} ${currentState.mbti} ì„±í–¥ / ${currentState.age}ëŒ€ / ${currentState.gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±'}`;
            document.getElementById('car-brand').innerText = best.brand;
            document.getElementById('car-name').innerText = best.name;
            document.getElementById('car-desc').innerText = best.desc;

            const carImg = document.getElementById('car-image');
            const loader = document.getElementById('image-loader');
            carImg.style.opacity = '0';
            loader.classList.remove('hidden');
            carImg.src = best.image;
            carImg.onload = () => { carImg.style.opacity = '1'; loader.classList.add('hidden'); };

            goToStep(4);
            setTimeout(() => document.getElementById('result-container').classList.remove('opacity-0'), 100);
        }

        function reset() {
            currentState = { step: 1, mbti: "", age: null, home: null, partner: null, gender: null };
            document.querySelectorAll('button').forEach(b => b.classList.remove('active'));
            document.getElementById('result-container').classList.add('opacity-0');
            goToStep(1);
        }
    </script>
</body>
</html>